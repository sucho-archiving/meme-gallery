---
import CheckboxMultiSelect from "../components/CheckboxMultiSelect.svelte";

import * as datasetObj from "../dataset.mjs";

const { title, selectId, placeHolder, containerClass, facet } = Astro.props;
const { memes } = datasetObj;
const facetValues = datasetObj[facet];

const options = Array.from(facetValues)
  .map((facetValue) => ({
    value: facetValue,
    count: memes.filter((meme) => meme[facet].includes(facetValue)).length,
  }))
  .sort((a, b) => b.count - a.count || a.value.localeCompare(b.value))
  .map((obj) => ({
    value: obj.value,
    label: `${obj.value} [${obj.count}]`,
  }));
---

<CheckboxMultiSelect
  {options}
  {selectId}
  {containerClass}
  {title}
  {placeHolder}
  client:idle
/>
